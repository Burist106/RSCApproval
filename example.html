<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RSC Smart Approval - ระบบบริหารจัดการโครงการ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: 'Sarabun', sans-serif; }
        .transition-all { transition-duration: 300ms; }
        
        /* Sidebar Styling */
        .sidebar-active {
            background: linear-gradient(90deg, rgba(234,88,12,0.1) 0%, rgba(255,255,255,0) 100%);
            border-left: 4px solid #ea580c;
            color: #ea580c;
        }

        /* Landing Page Animations */
        @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-10px); } 100% { transform: translateY(0px); } }
        .hero-float { animation: float 6s ease-in-out infinite; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.8s ease-out forwards; }

        /* A4 Paper */
        .a4-paper {
            width: 210mm; min-height: 297mm; padding: 20mm; margin: 0 auto;
            background: white; box-shadow: 0 0 15px rgba(0,0,0,0.1);
            font-size: 14px; line-height: 1.6; color: #333; transform-origin: top center;
        }
        
        /* Steps */
        .step-circle { width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 14px; transition: all 0.3s; }
        .step-active .step-circle { background-color: #ea580c; color: white; border: 2px solid #ea580c; }
        .step-inactive .step-circle { background-color: white; color: #94a3b8; border: 2px solid #e2e8f0; }
        .step-done .step-circle { background-color: #22c55e; color: white; border: 2px solid #22c55e; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <!-- ================= 1. LANDING PAGE (PUBLIC) ================= -->
    <div id="landing-page" class="min-h-screen flex flex-col bg-white">
        <!-- Navbar -->
        <nav class="fixed w-full z-50 bg-white/90 backdrop-blur-md border-b border-slate-100">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center h-20">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 bg-orange-500 rounded-lg flex items-center justify-center text-white text-xl shadow-lg">
                            <i class="fa-solid fa-shapes"></i>
                        </div>
                        <div>
                            <span class="font-bold text-xl text-slate-800 tracking-tight block">RSC Approval</span>
                            <span class="text-[10px] text-slate-500 uppercase tracking-widest block -mt-1">KMUTT System</span>
                        </div>
                    </div>
                    <div class="hidden md:flex items-center space-x-8 text-sm font-medium text-slate-600">
                        <a href="#features" class="hover:text-orange-600 transition">คุณสมบัติ</a>
                        <a href="#process" class="hover:text-orange-600 transition">ขั้นตอนการใช้งาน</a>
                        <a href="#contact" class="hover:text-orange-600 transition">ติดต่อเรา</a>
                    </div>
                    <button onclick="toggleLoginModal(true)" class="bg-slate-900 hover:bg-orange-600 text-white px-6 py-2.5 rounded-full font-medium transition shadow-lg hover:shadow-orange-200">
                        <i class="fa-solid fa-right-to-bracket mr-2"></i> เข้าสู่ระบบ
                    </button>
                </div>
            </div>
        </nav>

        <!-- Hero Section -->
        <section class="pt-32 pb-20 lg:pt-48 lg:pb-32 overflow-hidden relative">
            <div class="absolute top-0 right-0 -mr-20 -mt-20 w-96 h-96 bg-orange-100 rounded-full blur-3xl opacity-50"></div>
            <div class="absolute bottom-0 left-0 -ml-20 -mb-20 w-80 h-80 bg-blue-100 rounded-full blur-3xl opacity-50"></div>
            
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
                <div class="text-center max-w-3xl mx-auto animate-fade-in">
                    <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-orange-50 border border-orange-100 text-orange-600 text-xs font-bold mb-6">
                        <span class="flex h-2 w-2 rounded-full bg-orange-600"></span> Digital Transformation Phase 1
                    </div>
                    <h1 class="text-4xl md:text-6xl font-bold text-slate-900 leading-tight mb-6">
                        ระบบบริหารจัดการโครงการ<br>
                        <span class="text-transparent bg-clip-text bg-gradient-to-r from-orange-500 to-red-600">และงบประมาณออนไลน์</span>
                    </h1>
                    <p class="text-lg text-slate-500 mb-10 leading-relaxed">
                        เปลี่ยนการทำงานรูปแบบเดิมสู่ระบบดิจิทัลเต็มรูปแบบ ลดขั้นตอนเอกสาร ติดตามสถานะได้ทันที พร้อมระบบตรวจสอบงบประมาณอัจฉริยะ สำหรับศูนย์ RSC มหาวิทยาลัยเทคโนโลยีพระจอมเกล้าธนบุรี
                    </p>
                    <div class="flex flex-col sm:flex-row gap-4 justify-center">
                        <button onclick="toggleLoginModal(true)" class="bg-orange-600 hover:bg-orange-700 text-white px-8 py-4 rounded-xl font-bold text-lg shadow-xl shadow-orange-200 transition transform hover:-translate-y-1">
                            เริ่มต้นใช้งานทันที
                        </button>
                        <a href="#features" class="px-8 py-4 rounded-xl font-bold text-slate-600 border border-slate-200 hover:bg-slate-50 transition flex items-center justify-center gap-2">
                            <i class="fa-solid fa-circle-play"></i> ดูฟีเจอร์หลัก
                        </a>
                    </div>
                </div>

                <!-- Dashboard Preview Mockup -->
                <div class="mt-20 relative mx-auto max-w-5xl hero-float">
                    <div class="bg-slate-900 rounded-2xl p-2 shadow-2xl shadow-slate-400/50">
                        <div class="bg-slate-800 rounded-xl overflow-hidden border border-slate-700">
                            <!-- Mockup Header -->
                            <div class="h-8 bg-slate-800 border-b border-slate-700 flex items-center px-4 gap-2">
                                <div class="w-3 h-3 rounded-full bg-red-500"></div>
                                <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                                <div class="w-3 h-3 rounded-full bg-green-500"></div>
                            </div>
                            <!-- Mockup Body (Image Placeholder or CSS Art) -->
                            <div class="bg-slate-50 p-6 grid grid-cols-4 gap-4 h-64 md:h-96 items-center justify-center relative overflow-hidden">
                                <div class="absolute inset-0 flex items-center justify-center text-slate-300 font-bold text-2xl uppercase tracking-widest opacity-20 transform -rotate-12">
                                    Smart Dashboard Preview
                                </div>
                                <!-- Mockup Cards -->
                                <div class="col-span-4 md:col-span-1 bg-white p-4 rounded-lg shadow-sm h-32 animate-pulse"></div>
                                <div class="col-span-4 md:col-span-1 bg-white p-4 rounded-lg shadow-sm h-32 animate-pulse delay-75"></div>
                                <div class="col-span-4 md:col-span-1 bg-white p-4 rounded-lg shadow-sm h-32 animate-pulse delay-100"></div>
                                <div class="col-span-4 md:col-span-1 bg-white p-4 rounded-lg shadow-sm h-32 animate-pulse delay-150"></div>
                                <div class="col-span-4 md:col-span-3 bg-white p-4 rounded-lg shadow-sm h-48 mt-4 animate-pulse"></div>
                                <div class="col-span-4 md:col-span-1 bg-white p-4 rounded-lg shadow-sm h-48 mt-4 animate-pulse"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section id="features" class="py-20 bg-slate-50 border-t border-slate-200">
            <div class="max-w-7xl mx-auto px-4">
                <div class="text-center mb-16">
                    <h2 class="text-3xl font-bold text-slate-800 mb-4">บริการหลักของระบบ</h2>
                    <p class="text-slate-500 max-w-2xl mx-auto">รองรับกระบวนการขออนุมัติเอกสารสำคัญทั้ง 4 ประเภท ครอบคลุมทุกความต้องการของนักวิจัยและเจ้าหน้าที่</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                    <!-- Feature 1 -->
                    <div class="bg-white p-8 rounded-2xl shadow-sm border border-slate-100 hover:shadow-lg hover:-translate-y-1 transition group">
                        <div class="w-14 h-14 bg-orange-100 text-orange-600 rounded-xl flex items-center justify-center text-2xl mb-6 group-hover:bg-orange-600 group-hover:text-white transition">
                            <i class="fa-solid fa-file-contract"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-3">ขออนุมัติโครงการ</h3>
                        <p class="text-slate-500 text-sm leading-relaxed">ระบบ Wizard ช่วยสร้างบันทึกข้อความขออนุมัติโครงการ พร้อมเชื่อมโยงการใช้รถและยืมเงินอัตโนมัติ</p>
                    </div>
                    <!-- Feature 2 -->
                    <div class="bg-white p-8 rounded-2xl shadow-sm border border-slate-100 hover:shadow-lg hover:-translate-y-1 transition group">
                        <div class="w-14 h-14 bg-blue-100 text-blue-600 rounded-xl flex items-center justify-center text-2xl mb-6 group-hover:bg-blue-600 group-hover:text-white transition">
                            <i class="fa-solid fa-money-bill-transfer"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-3">ยืมเงิน (FOTO-04)</h3>
                        <p class="text-slate-500 text-sm leading-relaxed">สร้างสัญญายืมเงินทดรองจ่ายได้ง่ายๆ ระบบช่วยตรวจสอบวงเงินและเงื่อนไขการอนุมัติให้อัตโนมัติ</p>
                    </div>
                    <!-- Feature 3 -->
                    <div class="bg-white p-8 rounded-2xl shadow-sm border border-slate-100 hover:shadow-lg hover:-translate-y-1 transition group">
                        <div class="w-14 h-14 bg-purple-100 text-purple-600 rounded-xl flex items-center justify-center text-2xl mb-6 group-hover:bg-purple-600 group-hover:text-white transition">
                            <i class="fa-solid fa-car"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-3">ขอใช้รถยนต์</h3>
                        <p class="text-slate-500 text-sm leading-relaxed">แบบฟอร์มขออนุมัติใช้รถยนต์ส่วนตัว คำนวณระยะทางและค่าชดเชยน้ำมันให้อย่างแม่นยำ</p>
                    </div>
                    <!-- Feature 4 -->
                    <div class="bg-white p-8 rounded-2xl shadow-sm border border-slate-100 hover:shadow-lg hover:-translate-y-1 transition group">
                        <div class="w-14 h-14 bg-teal-100 text-teal-600 rounded-xl flex items-center justify-center text-2xl mb-6 group-hover:bg-teal-600 group-hover:text-white transition">
                            <i class="fa-solid fa-plane-departure"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-3">เดินทางราชการ</h3>
                        <p class="text-slate-500 text-sm leading-relaxed">ขออนุมัติเดินทางไปประชุม/อบรม พร้อมตารางคำนวณเบี้ยเลี้ยงและที่พักตามระเบียบ</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Process Section -->
        <section id="process" class="py-20 bg-white">
            <div class="max-w-5xl mx-auto px-4">
                <div class="text-center mb-16">
                    <h2 class="text-3xl font-bold text-slate-800 mb-4">ขั้นตอนการทำงาน</h2>
                    <p class="text-slate-500">ลดความซับซ้อน เหลือเพียง 3 ขั้นตอนหลัก</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center relative">
                    <!-- Connector Line (Desktop) -->
                    <div class="hidden md:block absolute top-12 left-0 w-full h-0.5 bg-slate-100 -z-10"></div>
                    
                    <div class="relative bg-white p-4">
                        <div class="w-24 h-24 bg-slate-50 border-4 border-white shadow-lg rounded-full flex items-center justify-center mx-auto mb-6 text-3xl text-slate-400 font-bold">1</div>
                        <h3 class="text-lg font-bold mb-2">ยื่นคำขอ</h3>
                        <p class="text-sm text-slate-500">นักวิจัยกรอกข้อมูลผ่านระบบ Wizard และแนบเอกสารที่จำเป็น</p>
                    </div>
                    <div class="relative bg-white p-4">
                        <div class="w-24 h-24 bg-orange-50 border-4 border-white shadow-lg rounded-full flex items-center justify-center mx-auto mb-6 text-3xl text-orange-500 font-bold">2</div>
                        <h3 class="text-lg font-bold mb-2">ตรวจสอบ</h3>
                        <p class="text-sm text-slate-500">Admin ตรวจสอบความถูกต้องและครบถ้วนของเอกสาร (Screening)</p>
                    </div>
                    <div class="relative bg-white p-4">
                        <div class="w-24 h-24 bg-green-50 border-4 border-white shadow-lg rounded-full flex items-center justify-center mx-auto mb-6 text-3xl text-green-500 font-bold">3</div>
                        <h3 class="text-lg font-bold mb-2">อนุมัติ</h3>
                        <p class="text-sm text-slate-500">ผอ.ศูนย์ พิจารณาอนุมัติผ่านระบบ และออกเอกสาร PDF อัตโนมัติ</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="bg-slate-900 text-slate-400 py-12 border-t border-slate-800">
            <div class="max-w-7xl mx-auto px-4 text-center">
                <div class="flex items-center justify-center gap-2 mb-6">
                    <div class="w-8 h-8 bg-slate-800 rounded flex items-center justify-center text-white"><i class="fa-solid fa-shapes"></i></div>
                    <span class="text-white font-bold text-xl">RSC System</span>
                </div>
                <p class="text-sm mb-6">ศูนย์ส่งเสริมและสนับสนุนมูลนิธิโครงการหลวงและโครงการตามพระราชดำริ<br>มหาวิทยาลัยเทคโนโลยีพระจอมเกล้าธนบุรี</p>
                <div class="flex justify-center gap-6 text-xl mb-8">
                    <a href="#" class="hover:text-white transition"><i class="fa-brands fa-facebook"></i></a>
                    <a href="#" class="hover:text-white transition"><i class="fa-solid fa-globe"></i></a>
                    <a href="#" class="hover:text-white transition"><i class="fa-solid fa-envelope"></i></a>
                </div>
                <p class="text-xs text-slate-600">&copy; 2025 King Mongkut's University of Technology Thonburi. All rights reserved.</p>
            </div>
        </footer>
    </div>

    <!-- ================= 2. LOGIN MODAL (Overlay) ================= -->
    <div id="login-modal" class="hidden fixed inset-0 z-[60] flex items-center justify-center bg-slate-900/90 backdrop-blur-sm transition-opacity duration-300 opacity-0 pointer-events-none">
        <div class="bg-white p-8 rounded-2xl shadow-2xl w-full max-w-md relative overflow-hidden transform scale-95 transition-transform duration-300" id="login-content">
            <button onclick="toggleLoginModal(false)" class="absolute top-4 right-4 text-slate-400 hover:text-red-500"><i class="fa-solid fa-xmark text-xl"></i></button>
            
            <div class="text-center mb-8 mt-2">
                <h2 class="text-2xl font-bold text-slate-800">เข้าสู่ระบบ</h2>
                <p class="text-slate-500 text-sm mt-1">กรุณาเลือกบทบาทเพื่อทดสอบ (Demo Mode)</p>
            </div>
            
            <div class="space-y-3">
                <button onclick="login('B')" class="w-full py-4 px-4 bg-white border-2 border-slate-100 hover:border-blue-500 hover:bg-blue-50 text-slate-700 hover:text-blue-700 rounded-xl transition flex items-center gap-4 group text-left">
                    <div class="w-12 h-12 rounded-lg bg-blue-100 text-blue-600 flex items-center justify-center group-hover:scale-110 transition text-xl"><i class="fa-solid fa-flask"></i></div>
                    <div><p class="font-bold">นักวิจัย (B Level)</p><p class="text-xs text-slate-400">สร้างคำขอ / ติดตามสถานะ</p></div>
                </button>
                <button onclick="login('Admin')" class="w-full py-4 px-4 bg-white border-2 border-slate-100 hover:border-purple-500 hover:bg-purple-50 text-slate-700 hover:text-purple-700 rounded-xl transition flex items-center gap-4 group text-left">
                    <div class="w-12 h-12 rounded-lg bg-purple-100 text-purple-600 flex items-center justify-center group-hover:scale-110 transition text-xl"><i class="fa-solid fa-user-check"></i></div>
                    <div><p class="font-bold">เจ้าหน้าที่ (Admin)</p><p class="text-xs text-slate-400">ตรวจสอบเอกสาร / กรองงาน</p></div>
                </button>
                <button onclick="login('A')" class="w-full py-4 px-4 bg-white border-2 border-slate-100 hover:border-green-500 hover:bg-green-50 text-slate-700 hover:text-green-700 rounded-xl transition flex items-center gap-4 group text-left">
                    <div class="w-12 h-12 rounded-lg bg-green-100 text-green-600 flex items-center justify-center group-hover:scale-110 transition text-xl"><i class="fa-solid fa-signature"></i></div>
                    <div><p class="font-bold">ผอ.ศูนย์ (A Level)</p><p class="text-xs text-slate-400">อนุมัติ / ดู Dashboard งบฯ</p></div>
                </button>
            </div>
        </div>
    </div>

    <!-- ================= 3. APP LAYOUT (Initially Hidden) ================= -->
    <div id="app-layout" class="hidden h-screen flex overflow-hidden bg-slate-50">
        <!-- Sidebar -->
        <aside id="sidebar" class="w-72 bg-white border-r border-slate-200 flex-col hidden md:flex z-20 shadow-lg">
            <div class="h-16 flex items-center px-6 border-b border-slate-100">
                <span class="text-lg font-bold text-slate-800">RSC <span class="text-orange-600">App</span></span>
            </div>
            <div class="flex-1 overflow-y-auto py-6 px-4 space-y-1">
                <p class="px-4 text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">Main Menu</p>
                <a href="#" onclick="showPage('dashboard')" id="nav-dashboard" class="sidebar-active flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-xl transition"><i class="fa-solid fa-chart-pie w-5"></i> Dashboard</a>
                
                <!-- Role Specific Menus -->
                <div class="role-b hidden space-y-1">
                    <a href="#" onclick="showPage('create-hub')" id="nav-create" class="flex items-center gap-3 px-4 py-3 text-sm font-medium text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-xl transition"><i class="fa-solid fa-circle-plus w-5"></i> สร้างคำขอใหม่</a>
                </div>
                <div class="role-admin hidden space-y-1">
                    <a href="#" onclick="showPage('admin-inbox')" id="nav-verify" class="flex items-center gap-3 px-4 py-3 text-sm font-medium text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-xl transition"><i class="fa-solid fa-list-check w-5"></i> รอตรวจสอบ <span class="ml-auto bg-red-500 text-white text-[10px] px-2 py-0.5 rounded-full">3</span></a>
                </div>
                <div class="role-a hidden space-y-1">
                    <a href="#" onclick="showPage('alevel-inbox')" id="nav-approve" class="flex items-center gap-3 px-4 py-3 text-sm font-medium text-slate-600 hover:bg-slate-50 hover:text-slate-900 rounded-xl transition"><i class="fa-solid fa-file-signature w-5"></i> รออนุมัติ <span class="ml-auto bg-orange-500 text-white text-[10px] px-2 py-0.5 rounded-full">5</span></a>
                </div>
            </div>
            <!-- Profile -->
            <div class="p-4 border-t border-slate-100 bg-slate-50/50">
                <div class="flex items-center gap-3 p-2 rounded-xl hover:bg-white transition cursor-pointer">
                    <img src="" class="w-8 h-8 rounded-full bg-slate-300" id="user-avatar">
                    <div class="flex-1 min-w-0">
                        <p class="text-sm font-bold text-slate-700 truncate" id="user-name">User</p>
                        <p class="text-xs text-slate-500 truncate" id="user-role">Role</p>
                    </div>
                    <i class="fa-solid fa-right-from-bracket text-slate-400 hover:text-red-500" onclick="logout()"></i>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 h-full overflow-hidden flex flex-col relative">
            <header class="h-16 bg-white border-b border-slate-200 md:hidden flex items-center justify-between px-4 shrink-0">
                <span class="font-bold">RSC App</span>
                <button onclick="logout()"><i class="fa-solid fa-power-off"></i></button>
            </header>

            <div id="content-area" class="flex-1 overflow-y-auto p-4 md:p-8 bg-slate-50/50">
                
                <!-- DASHBOARD -->
                <div id="page-dashboard" class="max-w-7xl mx-auto space-y-6">
                    <div class="flex justify-between items-end">
                        <div><h2 class="text-2xl font-bold text-slate-800">Dashboard</h2><p class="text-slate-500 text-sm">ภาพรวมระบบ</p></div>
                        <button class="role-b hidden bg-orange-600 text-white px-4 py-2 rounded-lg text-sm font-bold shadow hover:bg-orange-700 transition" onclick="showPage('create-hub')"><i class="fa-solid fa-plus mr-2"></i>สร้างคำขอ</button>
                    </div>
                    <!-- Stats -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                        <div class="bg-white p-6 rounded-xl border border-slate-100 shadow-sm"><p class="text-slate-500 text-xs font-bold uppercase">ทั้งหมด</p><h3 class="text-2xl font-bold">12</h3></div>
                        <div class="bg-white p-6 rounded-xl border border-slate-100 shadow-sm"><p class="text-orange-500 text-xs font-bold uppercase">รออนุมัติ</p><h3 class="text-2xl font-bold text-orange-600">5</h3></div>
                        <div class="bg-white p-6 rounded-xl border border-slate-100 shadow-sm"><p class="text-green-500 text-xs font-bold uppercase">อนุมัติแล้ว</p><h3 class="text-2xl font-bold text-green-600">28</h3></div>
                        <div class="bg-white p-6 rounded-xl border border-slate-100 shadow-sm"><p class="text-slate-500 text-xs font-bold uppercase">งบคงเหลือ</p><h3 class="text-2xl font-bold text-slate-800">1.2M</h3></div>
                    </div>
                    <!-- Chart (A Level Only) -->
                    <div class="role-a hidden bg-white p-6 rounded-xl border border-slate-100 shadow-sm">
                        <h3 class="font-bold mb-4">งบประมาณรายโครงการ</h3>
                        <canvas id="barChart" height="100"></canvas>
                    </div>
                </div>

                <!-- CREATE HUB -->
                <div id="page-create-hub" class="hidden max-w-5xl mx-auto">
                    <button onclick="showPage('dashboard')" class="mb-4 text-slate-500 hover:text-orange-600 text-sm"><i class="fa-solid fa-arrow-left"></i> กลับ</button>
                    <h2 class="text-2xl font-bold text-slate-800 mb-6 text-center">เลือกประเภทคำขอ</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <!-- Cards similar to previous code -->
                        <div onclick="startWizard(1)" class="bg-white p-6 rounded-2xl border hover:border-orange-500 cursor-pointer shadow-sm hover:shadow-lg transition group text-center">
                            <div class="w-12 h-12 bg-orange-100 text-orange-600 rounded-xl flex items-center justify-center mx-auto mb-4 text-xl"><i class="fa-solid fa-file-contract"></i></div>
                            <h3 class="font-bold">1. ขออนุมัติโครงการ</h3>
                        </div>
                        <div onclick="startWizard(2)" class="bg-white p-6 rounded-2xl border hover:border-blue-500 cursor-pointer shadow-sm hover:shadow-lg transition group text-center">
                            <div class="w-12 h-12 bg-blue-100 text-blue-600 rounded-xl flex items-center justify-center mx-auto mb-4 text-xl"><i class="fa-solid fa-money-bill-transfer"></i></div>
                            <h3 class="font-bold">2. ยืมเงิน (FOTO-04)</h3>
                        </div>
                        <div onclick="startWizard(3)" class="bg-white p-6 rounded-2xl border hover:border-purple-500 cursor-pointer shadow-sm hover:shadow-lg transition group text-center">
                            <div class="w-12 h-12 bg-purple-100 text-purple-600 rounded-xl flex items-center justify-center mx-auto mb-4 text-xl"><i class="fa-solid fa-car"></i></div>
                            <h3 class="font-bold">3. ขอใช้รถยนต์</h3>
                        </div>
                        <div onclick="startWizard(4)" class="bg-white p-6 rounded-2xl border hover:border-teal-500 cursor-pointer shadow-sm hover:shadow-lg transition group text-center">
                            <div class="w-12 h-12 bg-teal-100 text-teal-600 rounded-xl flex items-center justify-center mx-auto mb-4 text-xl"><i class="fa-solid fa-plane-departure"></i></div>
                            <h3 class="font-bold">4. เดินทางราชการ</h3>
                        </div>
                    </div>
                </div>

                <!-- WIZARD PAGE (Simplified for brevity, Logic same as previous) -->
                <div id="page-wizard" class="hidden h-[calc(100vh-6rem)] flex flex-col">
                    <div class="flex items-center justify-between mb-4 shrink-0">
                        <div class="flex items-center gap-4">
                            <button onclick="showPage('create-hub')" class="w-8 h-8 rounded-full bg-white border flex items-center justify-center hover:text-orange-600"><i class="fa-solid fa-arrow-left"></i></button>
                            <h2 class="text-xl font-bold text-slate-800">สร้างคำขอ</h2>
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="step-item step-active flex items-center gap-2"><div class="step-circle">1</div><span class="text-sm font-bold">ข้อมูล</span></div>
                            <div class="w-8 h-0.5 bg-slate-200"></div>
                            <div class="step-item step-inactive flex items-center gap-2"><div class="step-circle">2</div></div>
                        </div>
                    </div>
                    <!-- Wizard Split -->
                    <div class="flex-1 flex gap-6 overflow-hidden">
                        <div class="w-5/12 bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden flex flex-col">
                            <div class="flex-1 overflow-y-auto p-6 space-y-4">
                                <h3 class="text-sm font-bold text-slate-400 uppercase tracking-wider mb-2">รายละเอียด</h3>
                                <div><label class="text-xs font-bold">เรื่อง</label><input type="text" id="inp-subject" class="w-full border-slate-300 rounded-lg text-sm" oninput="updatePreview()"></div>
                                <div class="bg-blue-50 p-4 rounded-xl border border-blue-100">
                                    <label class="flex items-center gap-2 cursor-pointer mb-2">
                                        <input type="checkbox" id="chk-loan" class="rounded text-blue-600" onchange="toggleLoan()">
                                        <span class="font-bold text-blue-800 text-sm">ยืมเงิน (FOTO-04)</span>
                                    </label>
                                    <div id="loan-fields" class="hidden space-y-2 mt-2 pl-4 border-l-2 border-blue-300">
                                        <input type="number" id="inp-total-amount" class="w-full text-sm border-slate-300 rounded" placeholder="จำนวนเงิน" oninput="updatePreview()">
                                    </div>
                                </div>
                                <button onclick="submitWizard()" class="w-full bg-slate-800 text-white py-3 rounded-lg font-bold hover:bg-slate-900 shadow-md mt-4">ยืนยันและส่ง</button>
                            </div>
                        </div>
                        <div class="w-7/12 bg-slate-200 rounded-2xl p-8 overflow-y-auto flex justify-center">
                            <div class="a4-paper scale-90 origin-top">
                                <h1 class="text-center font-bold text-xl mb-8">บันทึกข้อความ</h1>
                                <p class="mb-4">เรื่อง <span id="prev-subject" class="text-blue-600">...</span></p>
                                <div id="insert-loan" class="hidden border border-slate-800 p-4 mt-8">
                                    <p class="font-bold text-center">สัญญาการยืมเงิน (FOTO-04)</p>
                                    <p class="text-right mt-2 font-bold text-xl text-green-700"><span id="p-loan-amount">0</span> บาท</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ADMIN INBOX -->
                <div id="page-admin-inbox" class="hidden max-w-6xl mx-auto">
                    <h2 class="text-2xl font-bold mb-6">Inbox ตรวจสอบ</h2>
                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                        <table class="w-full text-left text-sm"><thead class="bg-slate-50 font-bold text-slate-500"><tr><th class="p-4">ID</th><th class="p-4">เรื่อง</th><th class="p-4 text-center">Action</th></tr></thead>
                        <tbody class="divide-y divide-slate-100">
                            <tr><td class="p-4">BD-089</td><td class="p-4">ขอจัดอบรม AI</td><td class="p-4 text-center"><button class="bg-purple-600 text-white px-3 py-1 rounded hover:bg-purple-700" onclick="alert('Verified!')">Verify</button></td></tr>
                        </tbody></table>
                    </div>
                </div>

                <!-- A LEVEL INBOX -->
                <div id="page-alevel-inbox" class="hidden max-w-6xl mx-auto">
                    <h2 class="text-2xl font-bold mb-6">รายการรออนุมัติ</h2>
                    <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm flex justify-between items-center mb-4">
                        <div><h3 class="font-bold">ขอจัดอบรม AI</h3><p class="text-xs text-slate-500">ยอดเงิน 45,000 บาท</p></div>
                        <button class="bg-green-600 text-white px-6 py-2 rounded shadow hover:bg-green-700" onclick="alert('อนุมัติเรียบร้อย!')">อนุมัติ</button>
                    </div>
                </div>

            </div>
        </main>
    </div>

    <script>
        // --- LOGIC ---
        function toggleLoginModal(show) {
            const modal = document.getElementById('login-modal');
            const content = document.getElementById('login-content');
            if (show) {
                modal.classList.remove('hidden');
                setTimeout(() => { modal.classList.remove('opacity-0', 'pointer-events-none'); content.classList.remove('scale-95'); }, 10);
            } else {
                modal.classList.add('opacity-0', 'pointer-events-none');
                content.classList.add('scale-95');
                setTimeout(() => modal.classList.add('hidden'), 300);
            }
        }

        function login(role) {
            toggleLoginModal(false);
            document.getElementById('landing-page').classList.add('hidden');
            document.getElementById('app-layout').classList.remove('hidden');
            document.getElementById('sidebar').classList.add('flex'); // Ensure flex on desktop

            // Setup Role UI
            const nameEl = document.getElementById('user-name');
            const roleEl = document.getElementById('user-role');
            const avatar = document.getElementById('user-avatar');
            document.querySelectorAll('.role-b, .role-admin, .role-a').forEach(el => el.classList.add('hidden'));

            if (role === 'B') {
                nameEl.innerText = "ดร.สมชาย ใจดี"; roleEl.innerText = "นักวิจัย";
                avatar.src = "https://ui-avatars.com/api/?name=Somchai&background=0ea5e9&color=fff";
                document.querySelectorAll('.role-b').forEach(el => el.classList.remove('hidden'));
                showPage('dashboard');
            } else if (role === 'Admin') {
                nameEl.innerText = "คุณสุดา ตรวจสอบ"; roleEl.innerText = "Admin";
                avatar.src = "https://ui-avatars.com/api/?name=Suda&background=a855f7&color=fff";
                document.querySelectorAll('.role-admin').forEach(el => el.classList.remove('hidden'));
                showPage('admin-inbox');
            } else if (role === 'A') {
                nameEl.innerText = "ผอ. มั่นคง"; roleEl.innerText = "ผู้อำนวยการ";
                avatar.src = "https://ui-avatars.com/api/?name=Munkong&background=22c55e&color=fff";
                document.querySelectorAll('.role-a').forEach(el => el.classList.remove('hidden'));
                showPage('dashboard');
                setTimeout(renderCharts, 500);
            }
        }

        function logout() { location.reload(); }

        function showPage(pageId) {
            ['dashboard', 'create-hub', 'wizard', 'admin-inbox', 'alevel-inbox'].forEach(id => {
                document.getElementById('page-' + id).classList.add('hidden');
            });
            document.getElementById('page-' + pageId).classList.remove('hidden');
            
            // Sidebar Active
            document.querySelectorAll('.sidebar-link').forEach(el => el.classList.remove('sidebar-active'));
            if(pageId === 'dashboard') document.getElementById('nav-dashboard')?.classList.add('sidebar-active');
        }

        // Wizard Logic
        function startWizard(path) { showPage('wizard'); resetWizard(); updatePreview(); }
        function resetWizard() {
            document.getElementById('inp-subject').value = '';
            document.getElementById('chk-loan').checked = false;
            toggleLoan();
        }
        function toggleLoan() {
            const chk = document.getElementById('chk-loan').checked;
            const fields = document.getElementById('loan-fields');
            const prev = document.getElementById('insert-loan');
            if(chk) { fields.classList.remove('hidden'); prev.classList.remove('hidden'); }
            else { fields.classList.add('hidden'); prev.classList.add('hidden'); }
        }
        function updatePreview() {
            document.getElementById('prev-subject').innerText = document.getElementById('inp-subject').value || '...';
            const amt = document.getElementById('inp-total-amount').value;
            document.getElementById('p-loan-amount').innerText = amt ? Number(amt).toLocaleString() : '0';
        }
        function submitWizard() { alert('Success!'); showPage('dashboard'); }

        // Charts
        function renderCharts() {
            const ctx = document.getElementById('barChart');
            if(ctx) {
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['A', 'B', 'C'],
                        datasets: [{ label: 'ใช้งบ', data: [70, 40, 20], backgroundColor: '#ea580c' }]
                    }
                });
            }
        }
    </script>
</body>
</html>